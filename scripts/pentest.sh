#!/bin/bash

JUICESHOP_CONTAINER_NAME='juice-shop'
DVWA_CONTAINER_NAME='dvwa'
VAMPI_CONTAINER_NAME='vampi'

JUICESHOP_PORT='9000' # 3000
DVWA_PORT='9001' # 80
VAMPI_PORT='9002' # 5000

PENTEST_LIST=(${JUICESHOP_CONTAINER_NAME} ${DVWA_CONTAINER_NAME} ${VAMPI_CONTAINER_NAME})

# PENTEST SUB-MENU
submenu_pt () {
    PS3='>>> PENTEST Tools: '
    options=('RUN JUICE-SHOP' 'RUN DVWA' 'RUN VAMPI' '' 'STOP ALL' 'QUIT')
    select opt in "${options[@]}"
    do
        case $opt in
            'RUN JUICE-SHOP')
                docker_container_start ${JUICESHOP_CONTAINER_NAME} juice_shop ${JUICESHOP_PORT}
                ;;
            'RUN DVWA')
                docker_container_start ${DVWA_CONTAINER_NAME} dvwa ${DVWA_PORT}
                ;;
            'RUN VAMPI')
                docker_container_start ${VAMPI_CONTAINER_NAME} vampi ${VAMPI_PORT}
                ;;
            '')
                submenu_todo
                ;;
            'STOP ALL')
                docker_container_stop ${PENTEST_LIST}
                ;;
            'QUIT')
                PS3='>> SECURITY Tools: '
                return
                ;;
            *) echo "invalid option $REPLY";;
        esac
    done
}

juice_shop () {
    docker run -d \
    --name ${JUICESHOP_CONTAINER_NAME} 
    --network ${DOCKER_NETWORK_NAME} \
    -p ${CONTAINER_EXPOSED_PORT}:3000 \
    bkimminich/juice-shop
}

dvwa () {
    docker run -d \
    --rm \
    --name ${DVWA_CONTAINER_NAME} \
    --network ${DOCKER_NETWORK_NAME} \
    -p ${CONTAINER_EXPOSED_PORT}:80 \
    vulnerables/web-dvwa
}

# docker build -f Dockerfile -t vampi:local .
vampi () {
    docker run -d \
    --rm \
    --name ${VAMPI_CONTAINER_NAME} \
    --network ${DOCKER_NETWORK_NAME} \
    -p ${CONTAINER_EXPOSED_PORT}:5000 \
    vampi:local
}
